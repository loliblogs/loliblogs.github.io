{"version":3,"file":"index.s0jAaS6W.js","sources":["../../node_modules/.pnpm/astro@5.14.3_@netlify+blobs@10.0.10_@types+node@24.7.1_@vercel+blob@1.0.2_jiti@2.6.1_li_27be3abb82af9e8c972ec43498c502ca/node_modules/astro/dist/prefetch/index.js"],"sourcesContent":["const debug = import.meta.env.DEV ? console.debug : void 0;\nconst inBrowser = import.meta.env.SSR === false;\nconst prefetchedUrls = /* @__PURE__ */ new Set();\nconst listenedAnchors = /* @__PURE__ */ new WeakSet();\nlet prefetchAll = __PREFETCH_PREFETCH_ALL__;\nlet defaultStrategy = __PREFETCH_DEFAULT_STRATEGY__;\nlet clientPrerender = __EXPERIMENTAL_CLIENT_PRERENDER__;\nlet inited = false;\nfunction init(defaultOpts) {\n  if (!inBrowser) return;\n  if (inited) return;\n  inited = true;\n  debug?.(`[astro] Initializing prefetch script`);\n  prefetchAll ??= defaultOpts?.prefetchAll ?? false;\n  defaultStrategy ??= defaultOpts?.defaultStrategy ?? \"hover\";\n  initTapStrategy();\n  initHoverStrategy();\n  initViewportStrategy();\n  initLoadStrategy();\n}\nfunction initTapStrategy() {\n  for (const event of [\"touchstart\", \"mousedown\"]) {\n    document.addEventListener(\n      event,\n      (e) => {\n        if (elMatchesStrategy(e.target, \"tap\")) {\n          prefetch(e.target.href, { ignoreSlowConnection: true });\n        }\n      },\n      { passive: true }\n    );\n  }\n}\nfunction initHoverStrategy() {\n  let timeout;\n  document.body.addEventListener(\n    \"focusin\",\n    (e) => {\n      if (elMatchesStrategy(e.target, \"hover\")) {\n        handleHoverIn(e);\n      }\n    },\n    { passive: true }\n  );\n  document.body.addEventListener(\"focusout\", handleHoverOut, { passive: true });\n  onPageLoad(() => {\n    for (const anchor of document.getElementsByTagName(\"a\")) {\n      if (listenedAnchors.has(anchor)) continue;\n      if (elMatchesStrategy(anchor, \"hover\")) {\n        listenedAnchors.add(anchor);\n        anchor.addEventListener(\"mouseenter\", handleHoverIn, { passive: true });\n        anchor.addEventListener(\"mouseleave\", handleHoverOut, { passive: true });\n      }\n    }\n  });\n  function handleHoverIn(e) {\n    const href = e.target.href;\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      prefetch(href);\n    }, 80);\n  }\n  function handleHoverOut() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = 0;\n    }\n  }\n}\nfunction initViewportStrategy() {\n  let observer;\n  onPageLoad(() => {\n    for (const anchor of document.getElementsByTagName(\"a\")) {\n      if (listenedAnchors.has(anchor)) continue;\n      if (elMatchesStrategy(anchor, \"viewport\")) {\n        listenedAnchors.add(anchor);\n        observer ??= createViewportIntersectionObserver();\n        observer.observe(anchor);\n      }\n    }\n  });\n}\nfunction createViewportIntersectionObserver() {\n  const timeouts = /* @__PURE__ */ new WeakMap();\n  return new IntersectionObserver((entries, observer) => {\n    for (const entry of entries) {\n      const anchor = entry.target;\n      const timeout = timeouts.get(anchor);\n      if (entry.isIntersecting) {\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        timeouts.set(\n          anchor,\n          setTimeout(() => {\n            observer.unobserve(anchor);\n            timeouts.delete(anchor);\n            prefetch(anchor.href);\n          }, 300)\n        );\n      } else {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeouts.delete(anchor);\n        }\n      }\n    }\n  });\n}\nfunction initLoadStrategy() {\n  onPageLoad(() => {\n    for (const anchor of document.getElementsByTagName(\"a\")) {\n      if (elMatchesStrategy(anchor, \"load\")) {\n        prefetch(anchor.href);\n      }\n    }\n  });\n}\nfunction prefetch(url, opts) {\n  url = url.replace(/#.*/, \"\");\n  const ignoreSlowConnection = opts?.ignoreSlowConnection ?? false;\n  if (!canPrefetchUrl(url, ignoreSlowConnection)) return;\n  prefetchedUrls.add(url);\n  if (clientPrerender && HTMLScriptElement.supports?.(\"speculationrules\")) {\n    debug?.(`[astro] Prefetching ${url} with <script type=\"speculationrules\">`);\n    appendSpeculationRules(url, opts?.eagerness ?? \"immediate\");\n  } else if (document.createElement(\"link\").relList?.supports?.(\"prefetch\") && opts?.with !== \"fetch\") {\n    debug?.(`[astro] Prefetching ${url} with <link rel=\"prefetch\">`);\n    const link = document.createElement(\"link\");\n    link.rel = \"prefetch\";\n    link.setAttribute(\"href\", url);\n    document.head.append(link);\n  } else {\n    debug?.(`[astro] Prefetching ${url} with fetch`);\n    fetch(url, { priority: \"low\" });\n  }\n}\nfunction canPrefetchUrl(url, ignoreSlowConnection) {\n  if (!navigator.onLine) return false;\n  if (!ignoreSlowConnection && isSlowConnection()) return false;\n  try {\n    const urlObj = new URL(url, location.href);\n    return location.origin === urlObj.origin && (location.pathname !== urlObj.pathname || location.search !== urlObj.search) && !prefetchedUrls.has(url);\n  } catch {\n  }\n  return false;\n}\nfunction elMatchesStrategy(el, strategy) {\n  if (el?.tagName !== \"A\") return false;\n  const attrValue = el.dataset.astroPrefetch;\n  if (attrValue === \"false\") {\n    return false;\n  }\n  if (strategy === \"tap\" && (attrValue != null || prefetchAll) && isSlowConnection()) {\n    return true;\n  }\n  if (attrValue == null && prefetchAll || attrValue === \"\") {\n    return strategy === defaultStrategy;\n  }\n  if (attrValue === strategy) {\n    return true;\n  }\n  return false;\n}\nfunction isSlowConnection() {\n  if (\"connection\" in navigator) {\n    const conn = navigator.connection;\n    return conn.saveData || /2g/.test(conn.effectiveType);\n  }\n  return false;\n}\nfunction onPageLoad(cb) {\n  cb();\n  let firstLoad = false;\n  document.addEventListener(\"astro:page-load\", () => {\n    if (!firstLoad) {\n      firstLoad = true;\n      return;\n    }\n    cb();\n  });\n}\nfunction appendSpeculationRules(url, eagerness) {\n  const script = document.createElement(\"script\");\n  script.type = \"speculationrules\";\n  script.textContent = JSON.stringify({\n    prerender: [\n      {\n        source: \"list\",\n        urls: [url],\n        eagerness\n      }\n    ],\n    // Currently, adding `prefetch` is required to fallback if `prerender` fails.\n    // Possibly will be automatic in the future, in which case it can be removed.\n    // https://github.com/WICG/nav-speculation/issues/162#issuecomment-1977818473\n    prefetch: [\n      {\n        source: \"list\",\n        urls: [url],\n        eagerness\n      }\n    ]\n  });\n  document.head.append(script);\n}\nexport {\n  init,\n  prefetch\n};\n"],"names":["prefetchedUrls","Set","listenedAnchors","WeakSet","defaultStrategy","prefetchAll","inited","init","defaultOpts","event","document","addEventListener","e","elMatchesStrategy","target","prefetch","href","ignoreSlowConnection","passive","initTapStrategy","timeout","handleHoverIn","clearTimeout","setTimeout","handleHoverOut","body","onPageLoad","anchor","getElementsByTagName","has","add","initHoverStrategy","observer","createViewportIntersectionObserver","observe","initViewportStrategy","timeouts","WeakMap","IntersectionObserver","entries","entry","get","isIntersecting","set","unobserve","delete","url","opts","navigator","onLine","isSlowConnection","urlObj","URL","location","origin","pathname","search","canPrefetchUrl","replace","createElement","relList","supports","with","link","rel","setAttribute","head","append","fetch","priority","el","strategy","tagName","attrValue","dataset","astroPrefetch","conn","connection","saveData","test","effectiveType","cb","firstLoad"],"mappings":"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","x_google_ignoreList":[0]}